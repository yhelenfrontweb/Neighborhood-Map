function viewModel(){var a=this;a.locationsList=ko.observableArray(locations);var b,c=new google.maps.InfoWindow({info:""});a.locationsList().forEach(function(d){function e(){null!==d.marker.getAnimation()?d.marker.setAnimation(null):(d.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){d.marker.setAnimation(null)},1e3))}b=new google.maps.Marker({map:map,position:new google.maps.LatLng(d.lat,d.lng),title:d.name,animation:google.maps.Animation.DROP,icon:"img/mapicon.png"}),d.marker=b,d.marker.addListener("click",e),google.maps.event.addListener(d.marker,"click",function(){c||(c=new google.maps.InfoWindow);var b,e=d.name,f=d.url,g=encodeURI(d.name),h="https://en.wikipedia.org/w/api.php?action=opensearch&format=json&search="+g+"&limit=1&redirects=return&format=json";a.wikiTimeout=setTimeout(function(){alert("ERROR: Data could not be retrieved, Please Try Again Later")},5e3),$.ajax({url:h,dataType:"jsonp",jsonpCallback:"foo",cache:!0}).done(function(g){clearTimeout(a.wikiTimeout);var h=g[1];if(h.length>0)for(var i=0;i<h.length;i++)b='<div><h4 class="title">'+e+"</h4><p>"+g[2]+'</p><a href="'+f+'" target="_blank">'+f+"</a></div>",c.setContent(b);else b='<div><h4 class="title">'+e+'</h4><p>Sorry, No Articles Found on Wikipedia. Please click the link below. </p><a href="'+f+'" target="_blank">'+f+"</a></div>",c.setContent(b);c.open(map,d.marker)}).fail(function(a,d,f){console.log(f),b='<div><h4 class="title">'+e+"</h4><p>Failed to reach Wikipedia Servers, please try again</p></div>",c.setContent(b)})})}),a.list=function(a,b){google.maps.event.trigger(a.marker,"click")},a.query=ko.observable(""),a.searchedList=ko.computed(function(){return ko.utils.arrayFilter(a.locationsList(),function(b){var c=b.name.toLowerCase().indexOf(a.query().toLowerCase())>=0;return c?b.marker.setVisible(!0):b.marker.setVisible(!1),c})})}function initMap(){var a={lat:51.0543,lng:3.7174},b={center:a,zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),b),ko.applyBindings(new viewModel)}function googleError(){alert("Google Has Encountered An Error. Please Try Again Later")}var locations=[{name:"St Bavos Cathedral",lat:51.052981,lng:3.72752,url:"http://www.sintbaafskathedraal.be/"},{name:"Gravensteen",lat:51.057556,lng:3.72093,url:"https://gravensteen.stad.gent/"},{name:"Design Museum Ghent",lat:51.055796,lng:3.719837,url:"http://www.designmuseumgent.be/"},{name:"Museum of Fine Arts Ghent",lat:51.038089,lng:3.724218,url:"http://www.mskgent.be/en"},{name:"Kuipke",lat:51.039437,lng:3.729287,url:"https://stad.gent/openingsuren-adressen/kuipke"},{name:"The Leie River",lat:51.054371,lng:3.720437,url:"http://www.european-waterways.eu/e/info/belgium/Leie.php"},{name:"Great Butchers Hall",lat:51.055681,lng:3.722104,url:"http://www.grootvleeshuis.be/en/"},{name:"Belfry of Ghent",lat:51.053648,lng:3.724956,url:"http://www.belfortgent.be/"},{name:"Boekentoren",lat:51.045241,lng:3.725216,url:"http://www.boekentoren.be/"},{name:"Vooruit Centre",lat:51.047752,lng:3.727829,url:"http://vooruit.be/en/"}],menuButton=document.querySelector(".menu-button"),mapDiv=document.querySelector(".mapdiv"),navBar=document.querySelector("nav");menuButton.addEventListener("click",function(a){navBar.classList.toggle("open"),a.stopPropagation()}),mapDiv.addEventListener("click",function(){navBar.classList.remove("open")});